# üõ°Ô∏è Phase 2 ‚Äì Home Fiber Security Monitoring with Wazuh SIEM + VPN

This project simulates how a home network can be monitored using a cloud-hosted SIEM (Wazuh). The goal was to build a lightweight yet powerful detection environment for home/fiber setups using Google Cloud Platform (GCP), Wazuh, and my local Kali Linux VM.

---

## üß∞ Components Used

| Component                | Role                                                              |
| ------------------------ | ----------------------------------------------------------------- |
| **GCP VM (personal-vm)** | Hosts Wazuh SIEM (all-in-one stack) for monitoring/log collection |
| **Kali Linux**           | Simulated attacker node ‚Äî connected to GCP via VPN tunnel         |
| **Wazuh**                | SIEM used to detect EICAR, privilege escalation, network scans    |
| **Google Cloud**         | Cloud platform to build VPC, VM, firewall, VPN                    |
| **VPN Tunnel**           | StrongSwan IPsec tunnel between Kali and GCP                      |

---

## üì∑ Screenshots

Screenshots showing every step of this process are stored in this folder:

```
Phase2-HomeFiberSecurity/
```

Includes:

* GCP VPC + firewall setup
* StrongSwan VPN setup
* Wazuh dashboard login + alert
* EICAR command
* Nmap and Nikto output
* Logging API and Compute API enabled

---

## ‚öôÔ∏è Steps Performed

### üü© GCP Setup

1. Created VPC named `home-fiber`
2. Created firewall rules to allow:

   * SSH (22)
   * VPN (UDP 500, 4500)
   * Web (443)
3. Enabled required APIs:

   * Compute Engine API
   * Cloud Logging API
4. Deployed a VM (`personal-vm`) with Ubuntu and SSH access

### üü® Wazuh Deployment

* SSH‚Äôd into `personal-vm` from browser terminal
* Downloaded and installed Wazuh stack using:

```bash
curl -sO https://packages.wazuh.com/4.7/wazuh-install.sh
chmod +x wazuh-install.sh
sudo ./wazuh-install.sh --all-in-one --ignore-check
```

* Dashboard accessible at: `https://<external-ip>`
* Default login: `admin / <auto-generated-password>`

### üü• Malware Simulation via EICAR

Ran the following command to simulate malware:

```bash
echo 'X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*' | sudo tee /opt/confidential/eicar.txt
```

Wazuh triggered a detection on:

* **MITRE T1548.003**: Sudo and Sudo Caching
* Rule ID 5403: First time user executed sudo

### üîµ Attacker Simulation from Kali Linux

* Connected Kali to GCP using StrongSwan IPsec VPN tunnel
* Verified VPN and ran scans:

  * ‚úÖ `nmap` scan on Wazuh server
  * ‚úÖ `nikto` scan on Kali Linux

Some scans were blocked due to GCP firewall rules.

---

## üîç Detection Outcome

| Attack Type          | Tool               | Detected by Wazuh       |
| -------------------- | ------------------ | ----------------------- |
| Privilege Escalation | sudo + tee (EICAR) | ‚úÖ Yes (MITRE T1548.003) |
| Network Scan         | nmap               | ‚úÖ Yes                   |
| Web App Scan         | nikto              | ‚ùå Blocked by firewall   |

---

## üìå Lessons Learned

* Google Cloud firewall must be tuned to allow deep testing
* Wazuh is highly effective in detecting privilege misuse and scanning
* StrongSwan is a reliable way to simulate remote attackers in a safe VPN tunnel
* Logs are critical ‚Äî enabling cloud logging is key for observability

---

## üîÆ What's Next

* Simulate brute-force login attacks (MITRE T1110)
* Launch Metasploit exploits on Metasploitable2
* Add Windows and pfSense logs to Wazuh
* Write custom Wazuh rules for alert correlation

---

## üõ† Tools Used

* [Wazuh](https://wazuh.com)
* [Google Cloud](https://cloud.google.com)
* [Kali Linux](https://www.kali.org)
* MITRE ATT\&CK Framework
